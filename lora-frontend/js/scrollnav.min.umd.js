!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.scrollnav=e()}(this,function(){function t(t,e){var n,i={};for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i}function e(t,e){if("object"!=typeof t)return Promise.reject(new Error("First argument must be an object"));if("object"!=typeof(e=e||document.body))return Promise.reject(new Error("Second argument must be an object"));var n=e.getBoundingClientRect();return t.getBoundingClientRect().top-n.top}function n(t,i,s){void 0===s&&(s=[]);var r=s,o=i.className+"__";return t.forEach(function(t,s){var a=[],u=function(t,e){if("object"!=typeof t)return Promise.reject(new Error("First argument must be an object"));var n=t.id;if(!n){if("string"!=typeof e)return Promise.reject(new Error("Second argument must be a string"));t.id=n=e}return n}(t,o+(s+1));i.subSections&&t.matches(i.sections)&&(a=n(function(t,e,n){var i=[];for(t=t.nextElementSibling;t&&!t.matches(e);)!n||t.matches(n)?(i.push(t),t=t.nextElementSibling):t=t.nextElementSibling;return i}(t,i.sections,i.subSections),i,u));r.push({id:u,text:t.innerText||t.textContent,offsetTop:e(t),subSections:a})}),r}function i(t,e){var n=document.createElement("nav");return n.className=e.className,n.innerHTML=function t(e,n,i){void 0===i&&(i=!1);var s=n.className+(i?"__sub-":"__"),r="\n    "+e.map(function(e){if(e.id.startsWith(n.className))return'<li class="'+s+'item" data-sn-section="'+e.id+'">\n              <a class="'+s+'link" href="#'+e.id+'">'+e.text+"</a>\n              "+(e.subSections&&e.subSections.length?""+t(e.subSections,n,!0):"")+"\n            </li>"}).join("")+"\n  ";return'\n    <ol class="'+s+'list">\n      '+r+"\n    </ol>\n  "}(t,e),n}function s(t){return t.forEach(function(t){var n=document.querySelector("#"+t.id);t.offsetTop=e(n),t.subSections.length&&(t.subSections=s(t.subSections))}),t}function r(t,e){var n=t.getAttribute("href");return"#"===n.charAt(0)&&(n=n.substr(1)),function t(e,n){var i;e.forEach(function(e){e.id===n&&(i=e),e.subSections&&void 0===i&&(i=t(e.subSections,n))});return i}(e,n).offsetTop}var o,a,u,c=function(t){return function(e){return Math.pow(e,t)}},d=function(t){return function(e){return 1-Math.abs(Math.pow(e-1,t))}},f=function(t){return function(e){return e<.5?c(t)(2*e)/2:d(t)(2*e-1)/2+.5}},l={linear:f(1),easeInQuad:c(2),easeOutQuad:d(2),easeInOutQuad:f(2),easeInCubic:c(3),easeOutCubic:d(3),easeInOutCubic:f(3),easeInQuart:c(4),easeOutQuart:d(4),easeInOutQuart:f(4),easeInQuint:c(5),easeOutQuint:d(5),easeInOutQuint:f(5)};function h(t,e){return new Promise(function(n,i){if("number"!=typeof t)return i(new Error("First argument must be a number"));if("string"!=typeof(e=e||"linear"))return i(new Error("Second argument must be a string"));var s,r=window.pageYOffset,o=t-r,a=function(t){var e=Math.abs(t/2);return Math.min(Math.max(e,250),1200)}(o),u=20,c=0;!function t(){s=l[e]((c+=u)/a),window.scroll(0,s*o+r),c<a?setTimeout(t,u):n(window.pageYOffset)}()})}function g(t){function e(){var e=window.scrollY||window.pageYOffset||document.body.scrollTop,n=e+.4*window.innerHeight,i=function t(e,n,i){var s,r;e.forEach(function(t){t.offsetTop>i?!s&&t.offsetTop<n&&(s=t):s=t}),s&&s.subSections.length&&(r=t(s.subSections,n,i))&&(s=r);return s}(t.data,e,n);return function(t,e,n){var i=e.querySelector("[data-sn-active]");if(t){var s=e.querySelector("[data-sn-section="+t.id+"]");s&&s!==i&&(i&&(i.classList.remove(n.className+"__item--active"),i.removeAttribute("data-sn-active")),s.classList.add(n.className+"__item--active"),s.setAttribute("data-sn-active",!0))}else i&&(i.classList.remove(n.className+"__item--active"),i.removeAttribute("data-sn-active"))}(i,t.nav,t.settings),i}return window.addEventListener("scroll",e),e}function m(t){return t instanceof Element}return{init:function(e,c){var d=this;if(this.settings=t({sections:"h2",className:"scroll-nav",insertTarget:e,insertLocation:"before",easingStyle:"easeOutQuad",updateHistory:!0},c),void 0===this.data&&(this.data=[]),this.data.map(function(t){t.id.startsWith(d.settings.className)&&d.data.splice(t)}),m(e))if(!this.settings.insertTarget||m(this.settings.insertTarget))if(["append","prepend","after","before"].includes(this.settings.insertLocation)){var f,l,v,b,p=e.querySelectorAll(this.settings.sections);if(p.length)return this.data=n(p,this.settings,this.data),this.nav=i(this.data,this.settings),l=(f=this).settings.insertTarget,"append"===(v=f.settings.insertLocation)?l.appendChild(f.nav):"prepend"===v?l.insertBefore(f.nav,l.firstChild):"before"===v?l.parentNode.insertBefore(f.nav,l):"after"===v&&l.parentNode.insertBefore(f.nav,l.nextSibling),o=function(t){var e=t.settings;function n(n){n.preventDefault();var i=.39*window.innerHeight;return h(r(n.target,t.data)-i,e.easingStyle).then(function(){e.updateHistory&&history.replaceState({},"",n.target.getAttribute("href")),e.onScroll&&e.onScroll()})}return t.nav.querySelectorAll("a").forEach(function(t){t.addEventListener("click",n)}),n}(this),a=g(this),u=function(t){function e(){t.data=s(t.data)}return window.addEventListener("resize",e),e}(this),this.settings.debug&&((b=document.createElement("div")).className="snDebugger",b.setAttribute("style","\n      position: fixed;\n      top: 40%;\n      height: 0px;\n      border-bottom:5px solid red;\n      border-top: 5px solid blue;\n      width: 100%;\n      opacity: .5;\n      pointer-events: none;\n    "),document.body.appendChild(b)),this.settings.onInit?this.settings.onInit():void 0;this.settings.debug&&console.error('\n        scrollnav build failed, could not find any "'+this.settings.sections+'"\n        elements inside of "'+e+'"\n      ')}else this.settings.debug&&console.error('\n        scrollnav build failed, options.insertLocation "'+this.settings.insertLocation+'" is not a valid option\n      ');else this.settings.debug&&console.error('\n        scrollnav build failed, options.insertTarget "'+e+'" is not an HTML Element\n      ');else this.settings.debug&&console.error('\n        scrollnav build failed, content argument "'+e+'" is not an HTML Element\n      ')},destroy:function(e){if(this.settings=t(this.settings,e),function(t,e){t.querySelectorAll("a").forEach(function(t){t.removeEventListener("click",e)})}(this.nav,o),function(t){window.removeEventListener("scroll",t)}(a),function(t){window.removeEventListener("resize",t)}(u),this.nav.remove(),this.settings.onDestroy)return this.settings.onDestroy()},updatePositions:function(e){if(this.settings=t(this.settings,e),this.data=s(this.data),this.settings.onUpdatePositions)return this.settings.onUpdatePositions()}}});
//# sourceMappingURL=scrollnav.min.umd.js.map
